extends layout.pug

block pageName
  title Edit details of #{richOrg.id}

block content
  include flash.pug

  .container.mt-5
    h1 Edit details of #{richOrg.id}

  .container.card.mt-5.p-3
    form(action=richOrg.updateAnalyticsUrl method='post')
      .form-group
        label(for='facebookId') Facebook Pixel Id
        input(type='text' class='form-control' id='facebookId' name='facebookId' placeholder='1234567890123456' value=richOrg.facebookId pattern='\\d*')
        small.form-text.text-muted(id='facebookHelp').
          16 digit number. Visit Facebook's #[a(href='https://www.facebook.com/business/help/952192354843755') help page] for more information

      .form-group
        label(for='googleId') Google Analytics Tracking Id
        input(type='text' class='form-control' id='googleId' name='googleId' placeholder='UA-123456789-0' value=richOrg.googleId pattern='UA-\\d+-\\d+')
        small.form-text.text-muted(id='facebookHelp').
          Starts with "UA". Visit Google's #[a(href='https://support.google.com/analytics/answer/1008080') support page] for more information
      
      .d-flex.justify-content-end
        button.btn.btn-primary(type='submit') Update

  .container.mt-5
    h4.text-primary Recent VBM Signups
    .d-flex.justify-content-between
      .d-flex.justify-content-start
        .mr-1 Most recent submissions
      d-flex.justify-content-start
        a(href=richOrg.downloadUrl) Download All

    ul.mt-2.list-group
      each info in stateInfos
        li.list-group-item
          .d-flex.justify-content-between
            .d-flex.justify-content-start
              p.mr-2 #{info.name} (#{info.state})
              a(href= info.signedUrl target='_blank') (letter)
              
            .d-flex.justify-content-start
              small.text-muted #{new Date(info.created.seconds).toUTCString()}
